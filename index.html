<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Amora Secreta Sua Loja √çntima Online</title>
<meta name="description" content="Descubra os melhores produtos er√≥ticos com entrega discreta, seguran√ßa e o melhor pre√ßo do Brasil." />
<!-- SDK do Mercado Pago -->
<script src="https://sdk.mercadopago.com/js/v2"></script>
<style>
  /* RESET E BASE */
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
  body{background:#f8f8f8;color:#222;line-height:1.45}
  a{color:inherit;text-decoration:none}
  button{cursor:pointer}
  .container{max-width:1200px;margin:0 auto;padding:0 16px}

  /* HEADER */
  header{background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.06);position:sticky;top:0;z-index:150}
  .top-bar{background:#8a1b61;color:#fff;padding:8px 0;font-size:14px}
  .header-main{padding:12px 0}
  .header-content{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .logo{font-weight:800;color:#8a1b61;font-size:22px;cursor:pointer}
  .search-bar{flex:1;max-width:560px;margin:0 18px;position:relative}
  .search-bar input{width:100%;padding:10px 14px;border-radius:30px;border:1px solid #ddd;font-size:14px}
  .search-bar button{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:0;font-size:18px;color:#8a1b61}
  .user-actions{display:flex;gap:14px;align-items:center}
  .cart-count{background:#8a1b61;color:#fff;border-radius:50%;width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center;font-size:11px;margin-left:6px}

  /* NAV */
  nav{background:#8a1b61}
  .nav-container{max-width:1200px;margin:0 auto}
  .nav-menu{display:flex;flex-wrap:wrap;gap:6px;list-style:none;padding:8px 16px}
  .nav-menu button{background:transparent;border:0;color:#fff;padding:8px 12px;border-radius:6px;font-weight:600}
  .nav-menu button:hover{background:#6a1449}

  /* HERO */
  .hero{height:420px;background:linear-gradient(rgba(0,0,0,.32),rgba(0,0,0,.32)),url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');background-size:cover;background-position:center;color:#fff;display:flex;align-items:center}
  .hero .hero-inner{max-width:640px;padding:28px}
  .hero h1{font-size:36px;margin-bottom:10px}
  .hero p{font-size:16px;margin-bottom:18px}
  .btn{background:#8a1b61;color:#fff;padding:10px 18px;border-radius:30px;border:0;font-weight:700}
  .btn:hover{background:#6a1449}
  .btn-secondary{background:#6c757d;color:#fff;padding:10px 18px;border-radius:30px;border:0;font-weight:700}
  .btn-secondary:hover{background:#5a6268}

  /* PRODUCTS */
  .section{padding:42px 0}
  .section-title{text-align:center;margin-bottom:22px;font-size:26px;color:#333}
  .products{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
  .product-card{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 5px 14px rgba(0,0,0,.04);display:flex;flex-direction:column}
  .product-img{height:180px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:34px}
  .product-img img{width:100%;height:100%;object-fit:cover;display:block}
  .product-body{padding:12px;flex:1;display:flex;flex-direction:column}
  .product-title{font-weight:700;font-size:14px;margin-bottom:6px;min-height:38px}
  .product-price{color:#8a1b61;font-weight:800;margin-bottom:8px}
  .product-actions{margin-top:auto;display:flex;gap:8px}
  .small-btn{padding:8px 10px;border-radius:8px;border:0;background:#eee}
  .add-btn{background:#8a1b61;color:#fff;border:0;padding:8px 12px;border-radius:8px}

  /* CART DRAWER */
  .cart-drawer{position:fixed;right:0;top:0;height:100%;width:380px;background:#fff;box-shadow:-12px 0 30px rgba(0,0,0,.08);z-index:200;transform:translateX(100%);transition:transform .25s;padding:18px;display:flex;flex-direction:column}
  .cart-drawer.open{transform:translateX(0)}
  .cart-items{flex:1;overflow:auto;margin-top:8px}
  .cart-item{display:flex;gap:10px;padding:10px 0;border-bottom:1px solid #f1f1f1}
  .cart-item img{width:64px;height:64px;border-radius:6px;background:#f5f5f5;object-fit:cover}
  .cart-footer{border-top:1px solid #eee;padding-top:12px}

  /* MODAL PAYMENT */
  .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:300;align-items:center;justify-content:center;padding:18px}
  .modal.open{display:flex}
  .modal-content{background:#fff;padding:18px;border-radius:10px;max-width:760px;width:100%;max-height:90vh;overflow:auto}
  .modal-grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
  .pix-code{background:#f5f5f5;padding:12px;border-radius:6px;word-break:break-all}
  .qr-img{max-width:100%;border-radius:8px;border:1px solid #eee}

  /* CHECKOUT TRANSPARENTE STYLES */
  .checkout-section{margin-bottom:20px}
  .checkout-section h3{margin-bottom:12px;color:#333;border-bottom:2px solid #8a1b61;padding-bottom:8px}
  .form-group{margin-bottom:16px}
  .form-group label{display:block;margin-bottom:6px;font-weight:600;color:#333}
  .form-group input,.form-group select{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:16px;transition:border-color 0.3s}
  .form-group input:focus,.form-group select:focus{outline:none;border-color:#8a1b61;box-shadow:0 0 0 2px rgba(138,27,97,0.1)}
  .form-row{display:flex;gap:12px}
  .form-row .form-group{flex:1}
  .card-element{background:#fff;padding:12px;border:1px solid #ddd;border-radius:8px;min-height:50px}
  .secure-badge{display:flex;align-items:center;gap:8px;color:#28a745;font-size:14px;margin-top:8px;padding:8px;background:#f8fff9;border-radius:6px;border:1px solid #28a745}
  .installments-info{font-size:12px;color:#666;margin-top:4px}
  .payment-status{display:none;padding:16px;border-radius:8px;margin-top:16px;text-align:center}
  .payment-processing{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}
  .payment-success{background:#d1edff;color:#155724;border:1px solid #c3e6cb}
  .payment-error{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}

  /* FOOTER */
  footer{background:#333;color:#ddd;padding:36px 0}
  .footer-columns{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px}
  .footer-columns h3{color:#fff;margin-bottom:8px}
  .footer-bottom{text-align:center;margin-top:14px;border-top:1px solid rgba(255,255,255,.06);padding-top:12px;font-size:14px}

  /* WHATSAPP FLOAT */
  .whatsapp-float{position:fixed;right:18px;bottom:18px;background:#25D366;color:#fff;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:26px;z-index:400;box-shadow:0 4px 18px rgba(0,0,0,.15)}
  .whatsapp-float:hover{transform:scale(1.04)}

  /* RESPONSIVE */
  @media(max-width:1000px){.products{grid-template-columns:repeat(3,1fr)}}
  @media(max-width:760px){
    .header-content{flex-direction:column;align-items:flex-start}
    .products{grid-template-columns:repeat(1,1fr)}
    .modal-grid{grid-template-columns:1fr}
    .form-row{flex-direction:column}
  }
</style>
</head>
<body>
  <!-- Top header -->
  <header>
    <div class="top-bar">
      <div class="container">
        <div>Frete gr√°tis acima de R$ 199</div>
        <div>Atendimento: (35) 99973-9111</div>
      </div>
    </div>

    <div class="header-main">
      <div class="container header-content">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="logo" id="logoBtn">AMORA SECRETA</div>
        </div>

        <div class="search-bar">
          <input id="searchInput" placeholder="O que voc√™ est√° procurando? (ex: vibrador)" />
          <button onclick="document.getElementById('searchInput').focus()">üîç</button>
        </div>

        <div class="user-actions">
          <div id="open-cart-btn" style="cursor:pointer">üõí<span class="cart-count" id="cart-count">0</span></div>
        </div>
      </div>
    </div>

    <nav>
      <div class="nav-container">
        <ul class="nav-menu container" id="navMenu"></ul>
      </div>
    </nav>
  </header>

  <!-- Hero -->
  <section id="hero" class="hero">
    <div class="container hero-inner">
      <h1>Descubra o prazer com discri√ß√£o</h1>
      <p>Os melhores produtos para sua intimidade com total privacidade e entrega r√°pida.</p>
      <button class="btn" onclick="goHome()">Comprar Agora</button>
    </div>
  </section>

  <!-- Main products -->
  <main>
    <section class="section" id="productsSection">
      <div class="container">
        <h2 class="section-title" id="sectionTitle">Produtos em Destaque</h2>
        <div class="products" id="productsGrid"></div>
      </div>
    </section>
  </main>

  <!-- Cart drawer -->
  <aside class="cart-drawer" id="cartDrawer" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3>Carrinho</h3>
      <div><button class="btn" id="closeCartBtn">Fechar</button></div>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
        <strong>Total:</strong>
        <strong id="cartTotal">R$ 0,00</strong>
      </div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <button class="btn" id="checkoutBtn" style="flex:1">Finalizar Compra</button>
        <button class="small-btn" id="clearCartBtn" style="background:#eee">Limpar</button>
      </div>
    </div>
  </aside>

  <!-- Payment modal -->
  <div class="modal" id="paymentModal" aria-hidden="true">
    <div class="modal-content">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <h2>Op√ß√µes de Pagamento</h2>
        <button id="closePaymentModal" style="background:none;border:0;font-size:22px">&times;</button>
      </div>

      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px">
        <button class="btn" id="pixOption">PIX</button>
        <button class="btn" id="cardOption">Cart√£o de Cr√©dito</button>
        <button class="btn-secondary" id="boletoOption">Boleto</button>
      </div>

      <div class="modal-grid">
        <div>
          <!-- PIX -->
          <div id="pixPanel">
            <h3>Pagamento via PIX</h3>
            <p>Chave PIX (telefone): <strong id="pixKeyDisplay">35999739111</strong></p>
            <div class="pix-code" id="pixCopyArea">‚Äî</div>

            <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">
              <button class="btn" id="copyPixBtn">Copiar C√≥digo PIX</button>
              <button class="small-btn" id="showQrBtn">Mostrar QR Code</button>
              <button class="btn" id="whatsappPayBtn">Enviar pelo WhatsApp</button>
            </div>

            <p style="margin-top:10px;color:#444;font-size:14px">
              Instru√ß√µes: copie o c√≥digo e cole no seu app banc√°rio em "Pagar com PIX - Copiar/colar" ou escaneie o QR.
            </p>
          </div>

          <!-- CHECKOUT TRANSPARENTE - CART√ÉO DE CR√âDITO -->
          <div id="cardPanel" style="display:none">
            <div class="checkout-section">
              <h3>Pagamento com Cart√£o de Cr√©dito</h3>
              <p style="color:#666;margin-bottom:16px;">Pagamento 100% seguro processado pelo Mercado Pago</p>
              
              <div class="form-group">
                <label for="cardholderName">Nome completo (como no cart√£o)</label>
                <input type="text" id="cardholderName" placeholder="Jo√£o Silva Santos" required>
              </div>
              
              <div class="form-group">
                <label for="cardholderEmail">E-mail</label>
                <input type="email" id="cardholderEmail" placeholder="seu@email.com" required>
              </div>

              <div class="form-group">
                <label for="cardholderDoc">CPF</label>
                <input type="text" id="cardholderDoc" placeholder="000.000.000-00" required>
              </div>
            </div>

            <div class="checkout-section">
              <h4>Dados do Cart√£o</h4>
              
              <div class="form-group">
                <label>N√∫mero do cart√£o</label>
                <div id="cardNumber" class="card-element"></div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label>Data de validade</label>
                  <div id="expirationDate" class="card-element"></div>
                </div>
                <div class="form-group">
                  <label>C√≥digo de seguran√ßa</label>
                  <div id="securityCode" class="card-element"></div>
                </div>
              </div>

              <div class="form-group">
                <label for="installments">Parcelas</label>
                <select id="installments" required>
                  <option value="">Carregando op√ß√µes...</option>
                </select>
                <div class="installments-info" id="installmentsInfo"></div>
              </div>
            </div>

            <div class="secure-badge">
              <span>üîí</span>
              <span>Pagamento processado com seguran√ßa pelo Mercado Pago</span>
            </div>

            <button class="btn" id="processCardPayment" style="width:100%;margin-top:16px;padding:14px">
              Pagar com Cart√£o
            </button>

            <div id="paymentProcessing" class="payment-status payment-processing">
              <p>üîÑ Processando seu pagamento...</p>
            </div>

            <div id="paymentSuccess" class="payment-status payment-success">
              <p>‚úÖ Pagamento aprovado! Obrigado pela sua compra.</p>
            </div>

            <div id="paymentError" class="payment-status payment-error">
              <p id="errorMessage">‚ùå Erro no processamento do pagamento.</p>
            </div>
          </div>

          <!-- BOLETO -->
          <div id="boletoPanel" style="display:none">
            <h3>Boleto Banc√°rio</h3>
            <p style="color:#666;margin-bottom:16px;">Pague em qualquer banco ou lot√©rica</p>
            
            <div class="form-group">
              <label for="boletoName">Nome completo</label>
              <input type="text" id="boletoName" placeholder="Jo√£o Silva Santos" required>
            </div>
            
            <div class="form-group">
              <label for="boletoEmail">E-mail</label>
              <input type="email" id="boletoEmail" placeholder="seu@email.com" required>
            </div>

            <div class="form-group">
              <label for="boletoDoc">CPF</label>
              <input type="text" id="boletoDoc" placeholder="000.000.000-00" required>
            </div>

            <button class="btn" id="generateBoleto" style="width:100%;margin-top:16px">
              Gerar Boleto
            </button>

            <div id="boletoSuccess" class="payment-status payment-success" style="display:none">
              <p>‚úÖ Boleto gerado com sucesso! Enviaremos para seu e-mail.</p>
            </div>
          </div>
        </div>

        <div style="border-left:1px solid #f1f1f1;padding-left:12px">
          <h4>Resumo do Pedido</h4>
          <div id="miniCartSummary" style="margin-bottom:8px;color:#333"></div>
          <div style="margin-top:8px">
            <strong>Total: </strong><span id="modalTotal">R$ 0,00</span>
          </div>

          <div id="qrBox" style="margin-top:12px;display:none">
            <p style="margin-bottom:6px"><strong>QR Code PIX</strong></p>
            <img id="qrImage" class="qr-img" alt="QR Code PIX" />
            <p style="margin-top:8px;font-size:13px;color:#555">Escaneie com seu app banc√°rio</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-columns">
        <div>
          <h3>Institucional</h3>
          <ul style="list-style:none;padding:0;color:#ddd">
            <li>Sobre N√≥s</li>
            <li>Nossas Lojas</li>
            <li>Pol√≠tica de Privacidade</li>
            <li>Termos de Uso</li>
          </ul>
        </div>
        <div>
          <h3>Atendimento</h3>
          <ul style="list-style:none;padding:0;color:#ddd">
            <li>Central de Ajuda</li>
            <li>Perguntas Frequentes</li>
            <li>Formas de Pagamento</li>
            <li>Trocas e Devolu√ß√µes</li>
          </ul>
        </div>
        <div>
          <h3>Formas de Pagamento</h3>
          <div style="display:flex;gap:8px;margin-top:6px;flex-wrap:wrap;">
            <div style="width:48px;height:28px;background:#fff;border-radius:6px;display:flex;align-items:center;justify-content:center">üí≥</div>
            <div style="width:48px;height:28px;background:#fff;border-radius:6px;display:flex;align-items:center;justify-content:center">üì±</div>
          </div>
        </div>
        <div>
          <h3>Contato</h3>
          <div style="color:#ddd">
            <div>üìû (35) 99973-9111</div>
            <div>‚úâÔ∏è g6pousoalegre@gmail.com</div>
            <div>üìç Itajub√° - MG</div>
            <div style="margin-top:8px">Siga-nos:
              <span style="display:inline-block;margin-left:6px">üìò üì∑ üê¶</span>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        Amora Secreta ¬© 2025 - Todos os direitos reservados - CNPJ: 00.000.000/0000-00
      </div>
    </div>
  </footer>

  <!-- WhatsApp floating -->
  <a class="whatsapp-float" href="https://wa.me/5535999739111" target="_blank" title="Fale conosco">
    üíö
  </a>

<script>
/* ======================
   CONFIGURA√á√ïES DA LOJA
   ====================== */
const STORE_NAME = 'AMORA SECRETA';
const STORE_PHONE_INTERNAL = '5535999739111';
const STORE_PHONE_DISPLAY = '(35) 99973-9111';
const PIX_KEY = '35999739111';

// CONFIGURA√á√ÉO MERCADO PAGO - SUBSTITUA PELA SUA PUBLIC KEY
const MP_PUBLIC_KEY = 'TEST-35e4f59e-a9cc-473c-814f-e0a9ab857a68'; // SUA PUBLIC KEY AQUI

// CATEGORIAS COMPLETAS (TODAS AS ORIGINAIS)
const CATEGORIES = [
  { key:'home', label:'üè† P√°gina Inicial' },
  { key:'salao', label:'üè∑Ô∏è Sald√£o' },
  { key:'mais-vendidos', label:'üî• Mais Vendidos' },
  { key:'vibradores', label:'üîä Vibradores' },
  { key:'masturbadores', label:'üéØ Masturbadores' },
  { key:'acessorios', label:'üéÅ Acess√≥rios Er√≥ticos' },
  { key:'brinquedos', label:'üéÆ Brinquedos Er√≥ticos' },
  { key:'cosmeticos', label:'üíÑ Cosm√©ticos Er√≥ticos' },
  { key:'proteses', label:'üîå Pr√≥teses e Plugs' },
  { key:'fantasia', label:'üëó Fantasia Er√≥tica' },
  { key:'lingeries', label:'üëô Lingeries' },
  { key:'sado', label:'‚õìÔ∏è Sado e Fetiche' },
  { key:'higiene', label:'üß¥ Cuidados e Higiene' },
  { key:'contato', label:'üìû Contato' }
];

/* PRODUTOS COMPLETOS - TODAS AS CATEGORIAS ORIGINAIS */
const PRODUCTS_BY_CATEGORY = {
  vibradores: [
    { id: 'vibrador-1', title: 'Vibrador Bullet', price: 59.90, img: 'https://via.placeholder.com/300x300?text=Vibrador+Bullet', category: 'vibradores' },
    { id: 'vibrador-2', title: 'Vibrador Rabbit', price: 129.90, img: 'https://via.placeholder.com/300x300?text=Vibrador+Rabbit', category: 'vibradores' },
    { id: 'vibrador-3', title: 'Vibrador Pontal', price: 79.90, img: 'https://via.placeholder.com/300x300?text=Vibrador+Pontal', category: 'vibradores' },
    { id: 'vibrador-4', title: 'Vibrador Duplo', price: 149.90, img: 'https://via.placeholder.com/300x300?text=Vibrador+Duplo', category: 'vibradores' }
  ],
  masturbadores: [
    { id: 'masturbador-1', title: 'Masturbador Pussy', price: 89.90, img: 'https://via.placeholder.com/300x300?text=Masturbador+Pussy', category: 'masturbadores' },
    { id: 'masturbador-2', title: 'Masturbador An√°l', price: 99.90, img: 'https://via.placeholder.com/300x300?text=Masturbador+Anal', category: 'masturbadores' },
    { id: 'masturbador-3', title: 'Masturbador Realista', price: 129.90, img: 'https://via.placeholder.com/300x300?text=Masturbador+Realista', category: 'masturbadores' },
    { id: 'masturbador-4', title: 'Masturbador Vibrat√≥rio', price: 159.90, img: 'https://via.placeholder.com/300x300?text=Masturbador+Vibratorio', category: 'masturbadores' }
  ],
  cosmeticos: [
    { id: 'cosmetico-1', title: 'Gel Excitante', price: 49.90, img: 'https://via.placeholder.com/300x300?text=Gel+Excitante', category: 'cosmeticos' },
    { id: 'cosmetico-2', title: 'Lubrificante √çntimo', price: 39.90, img: 'https://via.placeholder.com/300x300?text=Lubrificante+Intimo', category: 'cosmeticos' },
    { id: 'cosmetico-3', title: '√ìleo Massagem', price: 59.90, img: 'https://via.placeholder.com/300x300?text=Oleo+Massagem', category: 'cosmeticos' },
    { id: 'cosmetico-4', title: 'Gel Sensitivo', price: 44.90, img: 'https://via.placeholder.com/300x300?text=Gel+Sensitivo', category: 'cosmeticos' }
  ],
  acessorios: [
    { id: 'acessorio-1', title: 'Anel Peniano', price: 29.90, img: 'https://via.placeholder.com/300x300?text=Anel+Peniano', category: 'acessorios' },
    { id: 'acessorio-2', title: 'Algemas de Veludo', price: 49.90, img: 'https://via.placeholder.com/300x300?text=Algemas+Veludo', category: 'acessorios' },
    { id: 'acessorio-3', title: 'Venda Sensual', price: 19.90, img: 'https://via.placeholder.com/300x300?text=Venda+Sensual', category: 'acessorios' },
    { id: 'acessorio-4', title: 'Spanker', price: 39.90, img: 'https://via.placeholder.com/300x300?text=Spanker', category: 'acessorios' }
  ],
  brinquedos: [
    { id: 'brinquedo-1', title: 'Brinquedo Er√≥tico 1', price: 79.90, img: 'https://via.placeholder.com/300x300?text=Brinquedo+1', category: 'brinquedos' },
    { id: 'brinquedo-2', title: 'Brinquedo Er√≥tico 2', price: 89.90, img: 'https://via.placeholder.com/300x300?text=Brinquedo+2', category: 'brinquedos' },
    { id: 'brinquedo-3', title: 'Brinquedo Er√≥tico 3', price: 99.90, img: 'https://via.placeholder.com/300x300?text=Brinquedo+3', category: 'brinquedos' },
    { id: 'brinquedo-4', title: 'Brinquedo Er√≥tico 4', price: 109.90, img: 'https://via.placeholder.com/300x300?text=Brinquedo+4', category: 'brinquedos' }
  ],
  proteses: [
    { id: 'protese-1', title: 'Pr√≥tese Realista', price: 149.90, img: 'https://via.placeholder.com/300x300?text=Protese+Realista', category: 'proteses' },
    { id: 'protese-2', title: 'Plug Anal Pequeno', price: 39.90, img: 'https://via.placeholder.com/300x300?text=Plug+Anal+P', category: 'proteses' },
    { id: 'protese-3', title: 'Plug Anal M√©dio', price: 49.90, img: 'https://via.placeholder.com/300x300?text=Plug+Anal+M', category: 'proteses' },
    { id: 'protese-4', title: 'Plug Anal Grande', price: 59.90, img: 'https://via.placeholder.com/300x300?text=Plug+Anal+G', category: 'proteses' }
  ],
  fantasia: [
    { id: 'fantasia-1', title: 'Fantasia Enfermeira', price: 89.90, img: 'https://via.placeholder.com/300x300?text=Fantasia+Enfermeira', category: 'fantasia' },
    { id: 'fantasia-2', title: 'Fantasia Policial', price: 99.90, img: 'https://via.placeholder.com/300x300?text=Fantasia+Policial', category: 'fantasia' },
    { id: 'fantasia-3', title: 'Fantasia Coelhinha', price: 79.90, img: 'https://via.placeholder.com/300x300?text=Fantasia+Coelhinha', category: 'fantasia' },
    { id: 'fantasia-4', title: 'Fantasia Borboleta', price: 69.90, img: 'https://via.placeholder.com/300x300?text=Fantasia+Borboleta', category: 'fantasia' }
  ],
  lingeries: [
    { id: 'lingerie-1', title: 'Lingerie Rendada', price: 69.90, img: 'https://via.placeholder.com/300x300?text=Lingerie+Rendada', category: 'lingeries' },
    { id: 'lingerie-2', title: 'Lingerie Sensual', price: 79.90, img: 'https://via.placeholder.com/300x300?text=Lingerie+Sensual', category: 'lingeries' },
    { id: 'lingerie-3', title: 'Lingerie Couro', price: 99.90, img: 'https://via.placeholder.com/300x300?text=Lingerie+Couro', category: 'lingeries' },
    { id: 'lingerie-4', title: 'Lingerie Babydoll', price: 89.90, img: 'https://via.placeholder.com/300x300?text=Lingerie+Babydoll', category: 'lingeries' }
  ],
  sado: [
    { id: 'sado-1', title: 'Algemas de Metal', price: 59.90, img: 'https://via.placeholder.com/300x300?text=Algemas+Metal', category: 'sado' },
    { id: 'sado-2', title: 'M√°scara de Couro', price: 49.90, img: 'https://via.placeholder.com/300x300?text=Mascara+Couro', category: 'sado' },
    { id: 'sado-3', title: 'Chicote de Couro', price: 69.90, img: 'https://via.placeholder.com/300x300?text=Chicote+Couro', category: 'sado' },
    { id: 'sado-4', title: 'Coleira com Corrente', price: 39.90, img: 'https://via.placeholder.com/300x300?text=Coleira+Corrente', category: 'sado' }
  ],
  higiene: [
    { id: 'higiene-1', title: 'Sabonete √çntimo', price: 24.90, img: 'https://via.placeholder.com/300x300?text=Sabonete+Intimo', category: 'higiene' },
    { id: 'higiene-2', title: 'Len√ßo Umedecido', price: 19.90, img: 'https://via.placeholder.com/300x300?text=Lenco+Umedecido', category: 'higiene' },
    { id: 'higiene-3', title: 'Hidratante √çntimo', price: 34.90, img: 'https://via.placeholder.com/300x300?text=Hidratante+Intimo', category: 'higiene' },
    { id: 'higiene-4', title: 'Spray √çntimo', price: 29.90, img: 'https://via.placeholder.com/300x300?text=Spray+Intimo', category: 'higiene' }
  ],
  salao: [
    { id: 'salao-1', title: 'Vibrador Bullet - Promo', price: 39.90, img: 'https://via.placeholder.com/300x300?text=Promo+Vibrador', category: 'salao' },
    { id: 'salao-2', title: 'Lubrificante - Oferta', price: 29.90, img: 'https://via.placeholder.com/300x300?text=Promo+Lubrificante', category: 'salao' },
    { id: 'salao-3', title: 'Anel Peniano - Desconto', price: 19.90, img: 'https://via.placeholder.com/300x300?text=Promo+Anel', category: 'salao' },
    { id: 'salao-4', title: 'Plug Anal - Liquida√ß√£o', price: 34.90, img: 'https://via.placeholder.com/300x300?text=Promo+Plug', category: 'salao' }
  ],
  'mais-vendidos': [
    { id: 'mais-vendido-1', title: 'Vibrador Rabbit Premium', price: 119.90, img: 'https://via.placeholder.com/300x300?text=Mais+Vendido+1', category: 'mais-vendidos' },
    { id: 'mais-vendido-2', title: 'Gel Excitante Plus', price: 42.90, img: 'https://via.placeholder.com/300x300?text=Mais+Vendido+2', category: 'mais-vendidos' },
    { id: 'mais-vendido-3', title: 'Lingerie Sensual Premium', price: 89.90, img: 'https://via.placeholder.com/300x300?text=Mais+Vendido+3', category: 'mais-vendidos' },
    { id: 'mais-vendido-4', title: 'Masturbador Realista', price: 129.90, img: 'https://via.placeholder.com/300x300?text=Mais+Vendido+4', category: 'mais-vendidos' }
  ]
};

/* ======================
   CHECKOUT TRANSPARENTE - MERCADO PAGO
   ====================== */
let mp;
let cardForm;

function initializeMercadoPago() {
    try {
        console.log('üîÑ Inicializando Mercado Pago...');
        mp = new MercadoPago(MP_PUBLIC_KEY, {
            locale: 'pt-BR'
        });
        
        initializeCardForm();
        console.log('‚úÖ Mercado Pago inicializado com sucesso');
    } catch (error) {
        console.error('‚ùå Erro ao inicializar Mercado Pago:', error);
    }
}

function initializeCardForm() {
    if (!mp) {
        console.error('Mercado Pago n√£o inicializado');
        return;
    }

    cardForm = mp.cardForm({
        amount: cartTotal().toString(),
        autoMount: true,
        form: {
            id: "cardForm",
            cardholderName: {
                id: "cardholderName",
                placeholder: "Titular do cart√£o",
            },
            cardholderEmail: {
                id: "cardholderEmail",
                placeholder: "E-mail",
            },
            cardNumber: {
                id: "cardNumber",
                placeholder: "N√∫mero do cart√£o",
            },
            cardExpirationMonth: {
                id: "expirationDate",
                placeholder: "MM",
            },
            cardExpirationYear: {
                id: "expirationDate",
                placeholder: "AA",
            },
            securityCode: {
                id: "securityCode",
                placeholder: "C√≥digo de seguran√ßa",
            },
            installments: {
                id: "installments",
                placeholder: "Parcelas",
            },
        },
        callbacks: {
            onFormMounted: error => {
                if (error) {
                    console.error('Form Mounted Error', error);
                    showPaymentError('Erro ao carregar formul√°rio de pagamento');
                    return;
                }
                console.log('‚úÖ Formul√°rio de cart√£o montado com sucesso');
            },
            onSubmit: (event) => {
                event.preventDefault();
                console.log('üîÑ Enviando dados do cart√£o...');
            },
            onFetching: (resource) => {
                console.log('üîç Buscando:', resource);
                showPaymentProcessing();
            },
            onCardTokenReceived: (error, token) => {
                if (error) {
                    console.error('‚ùå Erro no token do cart√£o:', error);
                    showPaymentError('Erro ao processar cart√£o: ' + error.message);
                    return;
                }
                
                console.log('‚úÖ Token recebido:', token);
                processPaymentWithToken(token.id);
            },
        },
    });
}

function processPaymentWithToken(token) {
    console.log('üîÑ Processando pagamento com token:', token);
    
    // SIMULA√á√ÉO DE PAGAMENTO - EM PRODU√á√ÉO, ENVIE PARA SEU BACKEND
    setTimeout(() => {
        showPaymentSuccess();
        
        // Limpar carrinho ap√≥s sucesso
        setTimeout(() => {
            cart = [];
            saveCart();
            closePaymentModal();
            closeCart();
        }, 3000);
    }, 2000);
}

/* ======================
   FUN√á√ïES DE PAGAMENTO
   ====================== */
function showPaymentProcessing() {
    document.getElementById('paymentProcessing').style.display = 'block';
    document.getElementById('paymentSuccess').style.display = 'none';
    document.getElementById('paymentError').style.display = 'none';
    document.getElementById('processCardPayment').disabled = true;
}

function showPaymentSuccess() {
    document.getElementById('paymentProcessing').style.display = 'none';
    document.getElementById('paymentSuccess').style.display = 'block';
    document.getElementById('paymentError').style.display = 'none';
    document.getElementById('processCardPayment').disabled = false;
}

function showPaymentError(message) {
    document.getElementById('paymentProcessing').style.display = 'none';
    document.getElementById('paymentSuccess').style.display = 'none';
    document.getElementById('paymentError').style.display = 'block';
    document.getElementById('errorMessage').textContent = message;
    document.getElementById('processCardPayment').disabled = false;
}

/* ======================
   FUN√á√ïES DA LOJA
   ====================== */
let current = 'home';
const CART_KEY = 'amora_cart_v5';
let cart = JSON.parse(localStorage.getItem(CART_KEY)) || [];

function formatMoney(v) { return 'R$ ' + Number(v).toFixed(2).replace('.',','); }
function saveCart() { localStorage.setItem(CART_KEY, JSON.stringify(cart)); updateCartUI(); }
function cartTotal() { return cart.reduce((s,i) => s + (i.price * i.qty), 0); }

function findProductById(id) {
    for(const k in PRODUCTS_BY_CATEGORY){
        const f = PRODUCTS_BY_CATEGORY[k].find(p => p.id === id);
        if(f) return f;
    }
    return null;
}

/* ======================
   RENDERIZA√á√ÉO
   ====================== */
function setupMenu() {
    const navMenu = document.getElementById('navMenu');
    navMenu.innerHTML = '';
    
    CATEGORIES.forEach(cat => {
        const li = document.createElement('li');
        const btn = document.createElement('button');
        btn.textContent = cat.label;
        btn.dataset.key = cat.key;
        btn.addEventListener('click', () => {
            if(cat.key === 'home') goHome();
            else goToCategory(cat.key);
        });
        li.appendChild(btn);
        navMenu.appendChild(li);
    });
}

function renderProducts(list) {
    const productsGrid = document.getElementById('productsGrid');
    productsGrid.innerHTML = '';
    
    if(list.length === 0){
        productsGrid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:40px;background:#fff;border-radius:10px">Nenhum produto encontrado.</div>`;
        return;
    }
    
    list.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
            <div class="product-img">
                <img src="${p.img}" alt="${p.title}" onerror="this.src='https://via.placeholder.com/300x300?text=Imagem+Indispon√≠vel'">
            </div>
            <div class="product-body">
                <div class="product-title">${p.title}</div>
                <div class="product-price">${formatMoney(p.price)}</div>
                <div class="product-actions">
                    <button class="add-btn" data-add="${p.id}">Adicionar ao Carrinho</button>
                </div>
            </div>
        `;
        productsGrid.appendChild(card);
    });
}

function goHome() {
    current = 'home';
    document.getElementById('hero').style.display = 'flex';
    document.getElementById('sectionTitle').textContent = 'Produtos em Destaque';
    
    // Produtos para home (pega alguns de cada categoria)
    let homeProducts = [];
    Object.keys(PRODUCTS_BY_CATEGORY).forEach(k => {
        if (k !== 'salao' && k !== 'mais-vendidos') {
            homeProducts = homeProducts.concat(PRODUCTS_BY_CATEGORY[k].slice(0, 2));
        }
    });
    renderProducts(homeProducts);
}

function goToCategory(key) {
    current = key;
    document.getElementById('hero').style.display = 'none';
    
    if(key === 'contato'){
        document.getElementById('sectionTitle').textContent = 'Contato';
        const grid = document.getElementById('productsGrid');
        grid.innerHTML = `<div style="grid-column:1/-1;background:#fff;padding:30px;border-radius:10px;text-align:center">
            <h3>Fale Conosco</h3>
            <p>üìû ${STORE_PHONE_DISPLAY}</p>
            <p>‚úâÔ∏è g6pousoalegre@gmail.com</p>
            <p>üìç Itajub√° - MG</p>
            <p style="margin-top:20px">
                <button class="btn" onclick="window.open('https://wa.me/${STORE_PHONE_INTERNAL}', '_blank')">
                    üí¨ Falar no WhatsApp
                </button>
            </p>
        </div>`;
        return;
    }
    
    const list = PRODUCTS_BY_CATEGORY[key] || [];
    document.getElementById('sectionTitle').textContent = CATEGORIES.find(c => c.key === key)?.label || 'Categoria';
    renderProducts(list);
    window.scrollTo({top: 0, behavior: 'smooth'});
}

/* ======================
   CARRINHO
   ====================== */
function updateCartUI() {
    const cartCount = document.getElementById('cart-count');
    const cartItemsEl = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    
    cartCount.textContent = cart.reduce((s,i) => s + i.qty, 0);
    cartItemsEl.innerHTML = '';
    
    if(cart.length === 0) {
        cartItemsEl.innerHTML = '<div style="padding:30px;text-align:center;color:#666">Seu carrinho est√° vazio.</div>';
    } else {
        cart.forEach(item => {
            const el = document.createElement('div');
            el.className = 'cart-item';
            el.innerHTML = `
                <img src="${item.img}" alt="${item.title}" onerror="this.src='https://via.placeholder.com/300x300?text=Imagem'">
                <div style="flex:1">
                    <div style="font-weight:700;font-size:14px">${item.title}</div>
                    <div style="margin-top:6px;color:#666">Qtd: ${item.qty} ‚Ä¢ ${formatMoney(item.price)}</div>
                    <div style="margin-top:8px;display:flex;gap:6px">
                        <button class="small-btn" data-action="minus" data-id="${item.id}">-</button>
                        <button class="small-btn" data-action="plus" data-id="${item.id}">+</button>
                        <button class="small-btn" data-action="remove" data-id="${item.id}">Remover</button>
                    </div>
                </div>
            `;
            cartItemsEl.appendChild(el);
        });
    }
    
    cartTotalEl.textContent = formatMoney(cartTotal());
    document.getElementById('modalTotal').textContent = formatMoney(cartTotal());
    renderMiniSummary();
}

function renderMiniSummary() {
    const mini = document.getElementById('miniCartSummary');
    if(cart.length === 0) {
        mini.innerHTML = '<div style="color:#666;text-align:center">Nenhum item no carrinho</div>';
        return;
    }
    
    let html = '<ul style="list-style:none;padding:0;margin:0">';
    cart.forEach(i => html += `<li style="margin-bottom:6px;font-size:14px">${i.qty}x ${i.title}</li>`);
    html += '</ul>';
    mini.innerHTML = html;
}

/* ======================
   EVENT LISTENERS
   ====================== */
document.addEventListener('click', function(e) {
    const t = e.target;
    
    // Adicionar ao carrinho
    if(t.dataset.add) {
        const pid = t.dataset.add;
        const prod = findProductById(pid);
        if(!prod) return alert('Produto n√£o encontrado');
        
        const inCart = cart.find(i => i.id === pid);
        if(inCart) inCart.qty++;
        else cart.push({ id:prod.id, title:prod.title, price:prod.price, qty:1, img:prod.img });
        
        saveCart();
        t.textContent = '‚úì Adicionado!';
        setTimeout(() => t.textContent = 'Adicionar ao Carrinho', 1000);
    }
    
    // A√ß√µes do carrinho
    if(t.dataset.action) {
        const id = t.dataset.id;
        const action = t.dataset.action;
        const idx = cart.findIndex(i => i.id === id);
        if(idx === -1) return;
        
        if(action === 'plus') cart[idx].qty++;
        if(action === 'minus') { cart[idx].qty--; if(cart[idx].qty <= 0) cart.splice(idx,1); }
        if(action === 'remove') cart.splice(idx,1);
        
        saveCart();
    }
    
    // Controles da interface
    if(t.id === 'open-cart-btn') openCart();
    if(t.id === 'closeCartBtn') closeCart();
    if(t.id === 'clearCartBtn') { if(confirm('Deseja limpar o carrinho?')) { cart=[]; saveCart(); } }
    if(t.id === 'checkoutBtn') openPaymentModal();
    if(t.id === 'logoBtn') goHome();
});

/* ======================
   MODAL DE PAGAMENTO
   ====================== */
const paymentModal = document.getElementById('paymentModal');
const pixPanel = document.getElementById('pixPanel');
const cardPanel = document.getElementById('cardPanel');
const boletoPanel = document.getElementById('boletoPanel');

function openPaymentModal() {
    if(cart.length === 0) {
        alert('Seu carrinho est√° vazio. Adicione produtos antes de finalizar.');
        return;
    }
    
    paymentModal.classList.add('open');
    paymentModal.setAttribute('aria-hidden','false');
    showPanel('pix');
    renderMiniSummary();
    updatePixArea();
    
    // Inicializar Mercado Pago quando modal abrir
    if(!mp) {
        initializeMercadoPago();
    }
}

function closePaymentModal() {
    paymentModal.classList.remove('open');
    paymentModal.setAttribute('aria-hidden','true');
    document.getElementById('qrBox').style.display = 'none';
    
    // Resetar estados
    document.getElementById('paymentProcessing').style.display = 'none';
    document.getElementById('paymentSuccess').style.display = 'none';
    document.getElementById('paymentError').style.display = 'none';
    document.getElementById('boletoSuccess').style.display = 'none';
}

function showPanel(which) {
    pixPanel.style.display = which === 'pix' ? 'block' : 'none';
    cardPanel.style.display = which === 'card' ? 'block' : 'none';
    boletoPanel.style.display = which === 'boleto' ? 'block' : 'none';
    
    // Reinicializar formul√°rio de cart√£o quando mostrar o painel
    if(which === 'card' && mp) {
        setTimeout(() => {
            if(cardForm) {
                // Atualizar valor no formul√°rio
                console.log('Atualizando valor para:', cartTotal());
            }
        }, 100);
    }
}

// Event listeners dos bot√µes de pagamento
document.getElementById('pixOption').addEventListener('click', () => showPanel('pix'));
document.getElementById('cardOption').addEventListener('click', () => showPanel('card'));
document.getElementById('boletoOption').addEventListener('click', () => showPanel('boleto'));
document.getElementById('closePaymentModal').addEventListener('click', closePaymentModal);

/* ======================
   PIX
   ====================== */
function updatePixArea() {
    const amount = cartTotal();
    const pixText = `Chave PIX: ${PIX_KEY}\nValor: ${formatMoney(amount)}\nLoja: ${STORE_NAME}`;
    document.getElementById('pixCopyArea').textContent = pixText;
    document.getElementById('pixKeyDisplay').textContent = PIX_KEY;
    document.getElementById('modalTotal').textContent = formatMoney(amount);
}

document.getElementById('copyPixBtn').addEventListener('click', function() {
    const amount = cartTotal();
    const copyText = `Chave PIX: ${PIX_KEY}\nValor: ${formatMoney(amount)}\nLoja: ${STORE_NAME}`;
    
    navigator.clipboard.writeText(copyText).then(() => {
        this.textContent = '‚úì Copiado!';
        setTimeout(() => this.textContent = 'Copiar C√≥digo PIX', 2000);
    });
});

document.getElementById('showQrBtn').addEventListener('click', function() {
    const amount = cartTotal();
    const qrText = `PIX:${PIX_KEY};VALOR:${amount.toFixed(2)};NOME:${STORE_NAME}`;
    const qrUrl = `https://chart.googleapis.com/chart?cht=qr&chs=250x250&chl=${encodeURIComponent(qrText)}`;
    
    document.getElementById('qrImage').src = qrUrl;
    document.getElementById('qrBox').style.display = 'block';
});

document.getElementById('whatsappPayBtn').addEventListener('click', function() {
    if(cart.length === 0) {
        alert('Carrinho vazio');
        return;
    }
    
    let msg = `Ol√°! Gostaria de finalizar meu pedido na ${STORE_NAME}%0A%0A`;
    msg += `*Itens do pedido:*%0A`;
    cart.forEach(i => {
        msg += `${i.qty}x ${i.title} - ${formatMoney(i.price)}%0A`;
    });
    msg += `%0A*Total: ${formatMoney(cartTotal())}*%0A%0A`;
    msg += `Vou pagar via PIX (chave: ${PIX_KEY})`;
    
    const waUrl = `https://wa.me/${STORE_PHONE_INTERNAL}?text=${msg}`;
    window.open(waUrl, '_blank');
});

/* ======================
   BOLETO (SIMULA√á√ÉO)
   ====================== */
document.getElementById('generateBoleto').addEventListener('click', function() {
    const name = document.getElementById('boletoName').value;
    const email = document.getElementById('boletoEmail').value;
    const doc = document.getElementById('boletoDoc').value;
    
    if(!name || !email || !doc) {
        alert('Por favor, preencha todos os dados para gerar o boleto.');
        return;
    }
    
    // Simula√ß√£o de gera√ß√£o de boleto
    this.textContent = 'Gerando boleto...';
    this.disabled = true;
    
    setTimeout(() => {
        document.getElementById('boletoSuccess').style.display = 'block';
        this.textContent = 'Boleto Gerado';
        
        // Em produ√ß√£o, aqui voc√™ enviaria o boleto por email
        console.log('Boleto gerado para:', { name, email, doc, amount: cartTotal() });
    }, 2000);
});

/* ======================
   INICIALIZA√á√ÉO
   ====================== */
document.addEventListener('DOMContentLoaded', function() {
    setupMenu();
    goHome();
    updateCartUI();
    
    // Inicializar Mercado Pago
    initializeMercadoPago();
    
    // Busca
    document.getElementById('searchInput').addEventListener('input', function() {
        const q = this.value.trim().toLowerCase();
        if(!q) {
            goHome();
            return;
        }
        
        let allProducts = [];
        Object.keys(PRODUCTS_BY_CATEGORY).forEach(k => {
            allProducts = allProducts.concat(PRODUCTS_BY_CATEGORY[k]);
        });
        
        const found = allProducts.filter(p => p.title.toLowerCase().includes(q));
        document.getElementById('sectionTitle').textContent = `Resultados para "${q}"`;
        renderProducts(found);
    });
});

// Fun√ß√µes de controle do carrinho
function openCart() {
    document.getElementById('cartDrawer').classList.add('open');
    document.getElementById('cartDrawer').setAttribute('aria-hidden','false');
}

function closeCart() {
    document.getElementById('cartDrawer').classList.remove('open');
    document.getElementById('cartDrawer').setAttribute('aria-hidden','true');
}
</script>
</body>
</html>
